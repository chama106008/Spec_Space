《作品作成ログ》
〈Day 1〉
Unity 導入 & 触り。
UEとの違い：「クラス」単位ではなく「オブジェクト」単位で設計。
UEだと先に設計書を書いておいて、それをベースに「クラス」を作成・配置。
Unityは空の「オブジェクト」を先に配置して、中身を後から追加。
どちらにしても、本質は内部に入っているコンポーネント。
取り合えず、2D platformer用のテンプレートを利用して、初期キャラのグラフィック変更まで。

〈Day 2〉
開発用の新規マップを作製、一本道に背景を付けて移動を分かりやすくして、カメラ追尾を導入（初期キャラから別オブジェクトに継承して使っていたため、カメラの追尾設定をそちらに合わせた）。壁を付けて最低限の移動基盤を準備、ゴールフラッグを配置してデバッグログで出力。

〈Day 3〉
かなり日が空いた。マップの配置を微調整。0基準できれいに配置する方が後で楽。
プレイヤーキャラクター向けに、パラメータ操作用のスクリプトを導入。
L shift押下中は当たり判定が消失するように設定、場外に出てしまうため外部にDeathZoneを設置して、侵入時は初期地点に移動。
★現状、プレイヤーキャラクターの速度がplayercontroller側のパラメータで変化する設定になっているため、初期位置に戻す際に速度を弄りづらい状態。落下し続けて下方向のベクトルを溜めて、最終的に当たり判定をすり抜けることが可能。本来の設計ならリスポーン時に速度を0にするべきだが、ぶっちゃけ面白いので、デウスエクスマキナ代わりに上限速度を設定して、何かのギミックに使っても良いかもしれない。難しいかもしれないが......

〈Day 4〉
一端バグは置いておいて、抵抗消失の実装を検討
→物理パラメータの操作がうまく行かず。colliderで摩擦を切り替えようとしたが、colliderの直接書き換えはできず（標準で読み取り専用になっている）。Physic Materialで変更はできそうだが、Frictionは0-1で限定されているためそのままの実装はできず。
代案として、ボタン押下時に①Friction = 0、②追加の物理挙動として、接地中のみフレームごとに横方向のベクトルを1%増やす処理を加える。

→→物理挙動を弄る中で、やはりキャラは初期から早めに作り直した方が良い気がした。良い感じのチュートリアルが見つかったら、そちらに鞍替えして中身を弄る方向でも良し。


〈Day5〉
ゲームの拘りポイントを改めて考えた際に、今回はキレイなコードやアニメーションよりは「物理挙動の操作」に焦点を置きたかったので、他の要素は一度捨てて、物理挙動が最も操作しやすくなる環境を目指して、一度作り直すことに決定。
プロジェクトはバックアップを取っておいて一度破棄、空の2Dプロジェクトから再開。名称は変わらず「SpecSpace」。
>簡易作成用に無料アセットを導入
→Simple 2D Platformer Assets Packと、ついでにタイル配置ができる2D Tile Sets - Puzzles & Platformersをインストール。後者は後のステージ作成に使えそうなので、後ほどtilemapと併せてお勉強。
>開発はyoutube動画を参考に
参考：https://www.youtube.com/watch?v=uCg9mqn_d_U&list=PLCImhINtRXjfibskcZQcWQu5ck_wgWq70&index=1
→簡便な2Dプラットフォーマーの作り方講座。比較的、今回のゲームはシンプルなコーディングの応用で実現できそうなので、しっかりめにコードの基礎を解説しているところを採用。unityのバージョン違いでやや苦戦。言葉の違いやコンポーネントの初期設定の違いに気を付けつつ実施。
>input設定
→動画ではある程度操作入力の基盤があったが、手元の環境では完全に更地でスタート。
インプットから関数起動までの設計は、前提として大雑把に「押下ボタン」か「連続入力」の2種で区別。それぞれについて、単純なテンプレートで組めるようになっている。アクションの追加手順はUEのトリガーベースとは逆で、
①アクションの包括的な名称設定（Move, Jumpなど）
②アクションの分類設定（押下/連続）
③そのアクションに割り当てるボタン設定
>動作設定
→Scriptで記述。基本的には、unityのいわゆる「ベースのC#script」は「monobehavior」のこと。これは、unityで扱われる各種処理トリガーとかに対応したスクリプト形態（厳密には、そのように定義されたクラス）。なので、これを扱うのが一般的。
→慣例的に、public変数/関数には冒頭にアンダーバーを付けて命名。やらなくても今は問題なし。
→rigid bodyコンポーネントを呼び出して、_move()関数の中で書き換え。moveでは常に移動入力に応じた「方向ベクトル」を変数として格納していて、かつこの変数を参照した移動速度調整が毎フレームUpdate()で呼ばれる。
>動作確認
→諸々アタッチして実行しても動かず、入力モードが初期で「None」になっていたので、これを「Player（= PlayerInputで設定したモード名）」に切り替えたところで移動に成功。移動速度は、Script側の「MoveSpeed」変数で調整可能。これがベースになるスピードで、これを参照しつつ左右の移動ベクトルをかけ合わせる形で横移動が成立する。

次回以降、前回プロジェクトの再現に向けて、①カメラ設置、②ジャンプ入力搭載、③すり抜け入力搭載まで。
①、③は比較的簡単、②は入力設計はできるが、射出処理&空中挙動にやや困る予感。

〈Day6〉
取り合えず、動画を参考にジャンプ入力から追加して、続けてすり抜け、カメラの順で。
→実施。ジャンプ入力は、「押下ボタン」式で導入。動画では「ジャンプ中/未ジャンプ」の2状態で分類していたが、今回は「空中」と「接地中」にしたかったため、接地判定を導入。CircleCastを利用して、Playerの子オブジェクトとして導入した基準点から一定範囲内の下側のプラットフォームを検出して「接地中」フラグを立てる。ジャンプ処理自体は「上方向への力付与」の形。ForceとImpuelseでも違うらしい。
→すり抜けは、単発アクションではなく「押している間切り替え」にしたかったが、「押している間」を検出する処理が見つからなかったので、Input system側で「press」処理の中で「press」と「release」を別々に作って、それぞれに処理を割り当てて解決。
→カメラは以前使っていた特殊なカメラオブジェクトが見つからなかったので、取り合えずmain cameraをplayerの子に移動して対応
→ついでに、背景を適当に導入して、レイヤーも軽く整備。

次回以降は、導入するとしたら①死亡判定、②クリア判定、③質量低減、④摩擦反転あたり。そこまでできたら、後はステージを作るためのmaptileの使用方法。
いい加減、UEの方も進めないといかん。


〈Day 7〉
朝に軽く作業。DeathZone設置、GoalFlag設置まで

〈Day 8〉
Mass変更実装。抵抗減少について、慣性の付与が前提なので、移動入力の効果を「速度ベクトル変更」から「力付与」に切り替える必要あり。その場合、恐らくmass減少でメチャクチャに動くようになってしまうので、スケーリング必須。
大きく変わってしまうので、バックアップを取って改めて編集予定。

〈Day 9〉
移動方式を、速度直指定から加速度付与に変更。
加減速はできるようになったが止まらなくなったので、抵抗を付与。物理挙動を柔軟に変更できるように、標準のDampingは使用せず、横方向の移動のみ地上の摩擦と空中の空気抵抗を設置。_onGroundに合わせて適用するパラメータを切り替え。
最高速度を設定、各方向について絶対値が最高速度を超えないように処理を組み替え。
_onGroundの判定がバグっていたため、修正。そもそも検出に使用する点が親オブジェクトの座標からずれていたので修正、直後に常に地上判定になるようになったが、親オブジェクトの判定を拾っていただけで、親オブジェクトのレイヤーを切り替えたら改善。
明日以降、抵抗反転ギミックを追加して、完了したらタイルマップのステージ制作。

〈Day 10〉
風邪気味なので軽くだけ。
抵抗反転を追加、押し込み時に抵抗を-1倍、離した時に再度-1倍にしたが、反映されても速度が維持されず。
Box Collider2DのFrictionが残っていたので、PhysicsMaterial2Dを新たに2種類（通常用と摩擦0）用意して、入力で切り替えまで実装。
反転時に滑り続けられるようにはなったが、明確な加速にはならず。かなりゆったりしている。
一先ずはこのままで様子を見るが、後ほど数値修正してハチャメチャに切り替えるかもしれない。

〈Day 11〉
未だに風邪気味。
テスト用の新規シーンを作成。自機はprefab化して移植。
Tielmapを導入。外部素材で、5種類の色+nullで扱えるように。
当たり判定の付与で苦戦→「tilemap」そのものに当たり判定を付与することで解決したが、色ごとの種別（赤のみ死亡エリアでtrigger化）に苦戦→当たり判定に応じて、複数のtilemapを区別して使うことで対応。
当たり判定にBox Collider 2Dを使用したところ、自機が動かなくなった。Boxの場合、全てのタイルを囲む四角いコライダーが配置される模様。
検索して、Tilemap Collider 2Dのことが分かったため、こちらに変更。当たり判定は付与できたが、今度はすり抜けの途中解除で壁にはまるようになった。
タイル一つ一つのあたり判定が分離しているようだったため、Composite Colliderで統合。今度は外枠が綺麗につながったものの、中身がスカスカになり、床の中を移動できるようになった。
Colliderの仕様をOutlineからPolygoneに変えたところですべて解決。

〈Day 12〉
撮影用に簡単にマップ作製。ギミックを活用すればクリアできる形。
少しだけジャンプ力を上げて、重力のスケールを強めてジャンプ挙動をやや鋭く修正。
最低限のUIを作って、ゲームクリア処理を作成、ゴールフラッグ側と結び付けて、ゴールフラッグ取得時にクリア処理を呼び出し成功。
フラッグ以外でも、他のオブジェクトや条件と結び付けて呼び出せばクリア処理は実行可能。
カメラ配置を微調整して、簡単なプレイデモを撮影。
https://youtu.be/80SuX93wZCk